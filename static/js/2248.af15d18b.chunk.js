"use strict";(self.webpackChunkData_Design_AI_for_Urban_Data_and_Viz_Harvard_GSD=self.webpackChunkData_Design_AI_for_Urban_Data_and_Viz_Harvard_GSD||[]).push([[2248],{22248:function(t,i,e){e.r(i),e.d(i,{CanvasDrawing:function(){return v},CustomDynamicBinSystem:function(){return p},Pixel:function(){return u},Solution:function(){return a}});var s=e(15671),h=e(43144),r=e(60136),n=e(29388),l=e(20386),o=e(87968),a=function(t){(0,r.Z)(e,t);var i=(0,n.Z)(e);function e(t){var h;(0,s.Z)(this,e),(h=i.call(this,t)).pts=[],h.captureVec=void 0,h.pixelMap=void 0,h.divText=void 0,h.center(-71.08759760905814,42.326218799267316),h.zoom(12),h.mView.navigation={gamepad:{enabled:!1},mouseWheelZoomEnabled:!1},h.disablePan=!0;var r=document.createElement("div");r.style.position="absolute",r.style.margin="20px",h.hostDiv.appendChild(r);var n=d("Type","0","5");return n.slider.defaultValue="0",n.div.style.marginTop="25px",n.text.textContent="Type",r.appendChild(n.div),n.slider.oninput=function(){h.pixelMap.mode=+n.slider.value,h.pixelMap.Init(),h.pixelMap.UpdateData(h.pts)},h.divText=document.createElement("div"),h.divText.style.color="#0ff",h.divText.style.marginTop="22px",h.divText.style.fontSize="18px",h.divText.textContent="Num of data:",r.appendChild(h.divText),(0,o.getCSVFromURL)("/Data-Design-AI-for-Urban-Data-and-Viz-Harvard-GSD-public/static/data/Primary_Street_Trees_Public.csv").then((function(t){for(var i=t.split(/\r\n|\r|\n/g),e=1;e<i.length;++e){var s=i[e].split(","),r=+s[13],n=+s[14];if(!isNaN(r)&&!isNaN(n)&&0!==r&&0!==n){var l=h.toScreen(r,n);h.pts.push(new o.Vector3(l[0],l[1],0))}if(e>1e3)break}h.pixelMap=new p(new o.Vector3(200,200,0),new o.Vector3(900,900,0)),h.pixelMap.mode=0,h.pixelMap.Init(),h.pixelMap.UpdateData(h.pts),h.start()})),h}return(0,h.Z)(e,[{key:"render",value:function(t){var i=this;t.globalCompositeOperation="color-dodge",this.pts.forEach((function(e){c(t,e.x,e.y,i.time+3,"rgba(10, 255, 10, 0.2)")})),this.pixelMap.RenderPixel(t),this.pixelMap.RenderCorner(t),t.globalCompositeOperation="source-over",this.pixelMap.RenderSelPixel(t)}},{key:"mouseDown",value:function(t,i){this.captureVec=this.pixelMap.IsHover(t,i)}},{key:"mouseMove",value:function(t,i){if(this.pixelMap&&(this.pixelMap.MoveInspection(t,i),this.pixelMap.selPixel)){var e="Num of data: "+this.pixelMap.selPixel.vec.z+", index:"+this.pixelMap.selPixel.i+","+this.pixelMap.selPixel.j;this.divText.textContent=e}else;}},{key:"mouseDrag",value:function(t,i){this.captureVec&&(this.pixelMap.DragControlPoint(t,i),this.pixelMap.UpdateData(this.pts))}},{key:"mouseUp",value:function(t,i){this.captureVec=void 0}}]),e}(l.RendererJSAPI),c=function(t,i,e,s,h){t.fillStyle=h,t.beginPath(),t.arc(i,e,2*(Math.sin(.8*s)+6),0,2*Math.PI),t.closePath(),t.fill()},p=function(){function t(i,e){(0,s.Z)(this,t),this.v0=void 0,this.v1=void 0,this.rx=void 0,this.ry=void 0,this.ddx=void 0,this.ddy=void 0,this.pts=[],this.ptList=[],this.listPixels=[],this.m=void 0,this.t=0,this.mode=0,this.selPixel=void 0,this.v0=i,this.v1=e,this.rx=10,this.ry=10,this.ddx=0,this.ddy=0,this.m=new o.Vector3(0,0),this.Init()}return(0,h.Z)(t,[{key:"IsHover",value:function(t,i){this.m.x=t,this.m.y=i;var e=this.pts[0][0];return o.Vector3.distanceTo(this.m,e)<8?e:(e=this.pts[0][this.pts[0].length-1],o.Vector3.distanceTo(this.m,e)<8?e:(e=this.pts[this.pts.length-1][this.pts[0].length-1],o.Vector3.distanceTo(this.m,e)<8?e:(e=this.pts[this.pts.length-1][0],o.Vector3.distanceTo(this.m,e)<8?e:void 0)))}},{key:"Move",value:function(t,i){this.MoveInspection(t,i)}},{key:"MoveInspection",value:function(t,i){this.m.x=t,this.m.y=i;for(var e=0;e<this.listPixels.length;++e){if((0,o.isInsideOfVecs)(this.m,this.listPixels[e].recVec))return void(this.selPixel=this.listPixels[e]);this.selPixel=void 0}}},{key:"DragControlPoint",value:function(t,i){this.m.x=t,this.m.y=i;var e=this.pts[0][0];o.Vector3.distanceTo(this.m,e)<60&&(this.v0.x=t,this.v0.y=i),e=this.pts[0][this.pts[0].length-1],o.Vector3.distanceTo(this.m,e)<60&&(this.v1.x=t,this.v0.y=i),e=this.pts[this.pts.length-1][this.pts[0].length-1],o.Vector3.distanceTo(this.m,e)<60&&(this.v1.x=t,this.v1.y=i),e=this.pts[this.pts.length-1][0],o.Vector3.distanceTo(this.m,e)<60&&(this.v0.x=t,this.v1.y=i),this.Init()}},{key:"Init",value:function(){switch(this.ddx=(this.v1.x-this.v0.x)/(this.rx-1),this.ddy=(this.v1.y-this.v0.y)/(this.ry-1),this.pts=[],this.ptList=[],this.listPixels=[],this.InitGrid(),this.mode){case 0:this.ComputeRec();break;case 1:this.ComputeTriA();break;case 2:this.ComputeTriB();break;case 3:this.ComputeDia();break;case 4:this.ComputeLShape();break;default:this.ComputeHex()}}},{key:"UpdateData",value:function(t){for(var i=0;i<this.listPixels.length;++i)this.listPixels[i].data.num=0;for(var e=0;e<t.length;++e)for(var s=t[e],h=0;h<this.listPixels.length;++h)(0,o.isInsideOfVecs)(s,this.listPixels[h].recVec)&&(this.listPixels[h].vec.z+=1)}},{key:"InitGrid",value:function(){this.pts=[];for(var t=0;t<this.ry;++t){for(var i=this.v0.y+t*this.ddy,e=[],s=0;s<this.rx;++s){var h=this.v0.x+s*this.ddx,r=new o.Vector3(h,i,0);e.push(r),this.ptList.push(r)}this.pts.push(e)}}},{key:"ComputeRec",value:function(){this.listPixels=[];for(var t=0;t<this.ry;t+=1)for(var i=0;i<this.rx;i+=1)if(i<this.rx-1&&t<this.ry-1){var e=new u(this,i,t);e.recVec.push(this.pts[t][i]),e.recVec.push(this.pts[t][i+1]),e.recVec.push(this.pts[t+1][i+1]),e.recVec.push(this.pts[t+1][i]),this.listPixels.push(e)}}},{key:"ComputeTriA",value:function(){this.listPixels=[];for(var t=0;t<this.ry;t+=1)for(var i=0;i<this.rx;i+=1)if(i<this.rx-1&&t<this.ry-1){var e=new u(this,i,t);e.recVec.push(this.pts[t][i]),e.recVec.push(this.pts[t][i+1]),e.recVec.push(this.pts[t+1][i]),this.listPixels.push(e),(e=new u(this,i,t)).recVec.push(this.pts[t][i+1]),e.recVec.push(this.pts[t+1][i+1]),e.recVec.push(this.pts[t+1][i]),this.listPixels.push(e)}}},{key:"ComputeDia",value:function(){this.listPixels=[];for(var t=0;t<this.ry;t+=1)for(var i=0;i<this.rx;i+=1)if(i<this.rx-2&&t<this.ry-1){var e=new u(this,i,t);e.recVec.push(this.pts[t][i]),e.recVec.push(this.pts[t][i+1]),e.recVec.push(this.pts[t+1][i+2]),e.recVec.push(this.pts[t+1][i+1]),this.listPixels.push(e)}}},{key:"ComputeLShape",value:function(){this.listPixels=[];for(var t=0;t<this.ry;t+=3)for(var i=0;i<this.rx;i+=2)if(i<this.rx-2&&t<this.ry-2){var e=new u(this,i,t);e.recVec.push(this.pts[t][i]),e.recVec.push(this.pts[t][i+2]),e.recVec.push(this.pts[t+1][i+2]),e.recVec.push(this.pts[t+1][i+1]),e.recVec.push(this.pts[t+2][i+1]),e.recVec.push(this.pts[t+2][i]),this.listPixels.push(e),(e=new u(this,i,t)).recVec.push(this.pts[t+2][i]),e.recVec.push(this.pts[t+3][i]),e.recVec.push(this.pts[t+3][i+2]),e.recVec.push(this.pts[t+1][i+2]),e.recVec.push(this.pts[t+1][i+1]),e.recVec.push(this.pts[t+2][i+1]),this.listPixels.push(e)}}},{key:"ComputeTriB",value:function(){this.listPixels=[];for(var t=0;t<this.ry;t+=1)for(var i=0;i<this.rx;i+=1)if(i<this.rx-1&&t<this.ry-1){var e=new u(this,i,t);e.recVec.push(this.pts[t][i]),e.recVec.push(this.pts[t][i+1]),e.recVec.push(this.pts[t+1][i+1]),this.listPixels.push(e),(e=new u(this,i,t)).recVec.push(this.pts[t][i]),e.recVec.push(this.pts[t+1][i+1]),e.recVec.push(this.pts[t+1][i]),this.listPixels.push(e)}}},{key:"ComputeHex",value:function(){this.listPixels=[];for(var t=!0,i=0;i<this.ry;i+=2){for(var e=0;e<this.rx;e+=2)if(t){if(e%2===0&&e<this.rx-2&&i%2===0&&i<this.ry-2){var s=new u(this,e,i);s.recVec.push(this.pts[i][e+1]),s.recVec.push(this.pts[i+1][e+2]),s.recVec.push(this.pts[i+2][e+2]),s.recVec.push(this.pts[i+3][e+1]),s.recVec.push(this.pts[i+2][e]),s.recVec.push(this.pts[i+1][e]),this.listPixels.push(s)}}else if(e%2===0&&e<this.rx-2&&i%2===0&&i<this.ry-2){var h=new u(this,e,i);h.recVec.push(this.pts[i][e+2]),h.recVec.push(this.pts[i+1][e+3]),h.recVec.push(this.pts[i+2][e+3]),h.recVec.push(this.pts[i+3][e+2]),h.recVec.push(this.pts[i+2][e+1]),h.recVec.push(this.pts[i+1][e+1]),this.listPixels.push(h)}t=!t}}},{key:"RenderPixel",value:function(t){for(var i=0;i<this.listPixels.length;++i)this.listPixels[i].Render(t)}},{key:"RenderCorner",value:function(t){var i=this.pts[0][0];v.PointByNVecAni(t,i,7,this.t,"rgba(0, 0, 0, 1)"),t.stroke(),i=this.pts[0][this.pts[0].length-1],v.PointByNVecAni(t,i,7,this.t,"rgba(0, 0, 0, 1)"),t.stroke(),i=this.pts[this.pts.length-1][this.pts[0].length-1],v.PointByNVecAni(t,i,7,this.t,"rgba(0, 0, 0, 1)"),t.stroke(),i=this.pts[this.pts.length-1][0],v.PointByNVecAni(t,i,7,this.t,"rgba(0, 0, 0, 1)"),t.stroke(),this.t+=.07}},{key:"RenderSelPixel",value:function(t){if(this.selPixel){t.lineWidth=3,t.strokeStyle="#ffffff",t.beginPath(),t.moveTo(this.selPixel.recVec[0].x,this.selPixel.recVec[0].y);for(var i=1;i<this.selPixel.recVec.length;++i)t.lineTo(this.selPixel.recVec[i].x,this.selPixel.recVec[i].y);t.closePath(),t.stroke()}}}]),t}(),u=function(){function t(i,e,h){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new o.Vector3(0,0,0);(0,s.Z)(this,t),this.map=void 0,this.vec=void 0,this.norV=void 0,this.nPix=[],this.recVec=void 0,this.i=-1,this.j=-1,this.k=-1,this.u=-1,this.v=-1,this.id=void 0,this.color=[],this.data=void 0,this.map=i,this.vec=r,this.nPix=[],this.recVec=[],this.i=e,this.j=h,this.k=-1,this.id=t.GetID(),this.data={}}return(0,h.Z)(t,[{key:"ToString",value:function(){return"Pixel"+this.id}},{key:"Update",value:function(){}},{key:"Render",value:function(t){t.lineWidth=1,t.strokeStyle="rgba(0, 0, 0, 0.3)",t.fillStyle="rgba(0, 255, 255, ".concat(.05*this.vec.z," )"),t.beginPath(),t.moveTo(this.recVec[0].x,this.recVec[0].y);for(var i=1;i<this.recVec.length;++i)t.lineTo(this.recVec[i].x,this.recVec[i].y);t.closePath(),t.stroke(),t.fill()}}],[{key:"GetID",value:function(){return t.ID++}}]),t}();u.ID=0;var v=function(){function t(){(0,s.Z)(this,t)}return(0,h.Z)(t,null,[{key:"LineByVecs",value:function(t,i,e){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#ff0000";t.strokeStyle=h,t.lineWidth=s,t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(e.x,e.y),t.closePath(),t.stroke()}},{key:"Line",value:function(t,i,e,s,h){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,n=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"#ff0000";t.strokeStyle=n,t.lineWidth=r,t.beginPath(),t.moveTo(i,e),t.lineTo(s,h),t.closePath(),t.stroke()}},{key:"Point",value:function(t,i,e){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#ff0000";t.fillStyle=h,t.beginPath(),t.arc(i,e,s,0,2*Math.PI),t.closePath(),t.fill()}},{key:"PointByNVec",value:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#ff0000";t.fillStyle=s,t.beginPath(),t.arc(i.x,i.y,e,0,2*Math.PI),t.closePath(),t.fill()}},{key:"PointByNVecAni",value:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,s=arguments.length>3?arguments[3]:void 0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#ff0000";t.fillStyle=h,t.beginPath(),t.arc(i.x,i.y,e+2*(1+Math.sin(s)),0,2*Math.PI),t.closePath(),t.fill()}},{key:"GridLineOrigin",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,r=-i*s*.5,n=-e*h*.5;t.lineWidth=.1;for(var l=0;l<=e;++l)t.beginPath(),t.moveTo(r,n+h*l),t.lineTo(i*s*.5,n+h*l),t.closePath(),t.stroke(),t.beginPath(),t.moveTo(r+s*l,n),t.lineTo(n+h*l,e*h*.5),t.closePath(),t.stroke()}},{key:"GridPointOrigin",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,r=-i*s*.5,n=-e*h*.5;t.lineWidth=.1;for(var l=0;l<=e;++l)for(var o=0;o<=i;++o)t.beginPath(),t.arc(r+s*o,n+h*l,1,0,2*Math.PI),t.closePath(),t.fill()}}]),t}(),d=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0.0",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"100",s=document.createElement("div");s.style.display="flex";var h=document.createElement("input");h.type="range",h.min=i,h.max=e;var r=document.createElement("div");return r.textContent=t,r.style.color="#aaa",s.appendChild(h),s.appendChild(r),{div:s,slider:h,text:r}}}}]);
//# sourceMappingURL=2248.af15d18b.chunk.js.map