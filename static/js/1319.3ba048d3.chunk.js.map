{"version":3,"file":"static/js/1319.3ba048d3.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/renderers/support/clickToleranceUtils.js","../node_modules/@arcgis/core/views/2d/layers/BitmapTileLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/TileLayerView2D.js","../node_modules/@arcgis/core/views/layers/TileLayerView.js","../node_modules/@arcgis/core/views/2d/layers/support/imageUtils.js","../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js","../node_modules/@arcgis/core/views/support/drapedUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nfunction t(t,e){return e?\"xoffset\"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):\"yoffset\"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function e(t){let e=0,n=0;for(let r=0;r<t.length;r++){const s=t[r].size;\"number\"==typeof s&&(e+=s,n++)}return e/n}function n(t,n){return\"number\"==typeof t?t:t&&t.stops&&t.stops.length?e(t.stops):n}function r(t,e){if(!e)return t;const r=e.filter((t=>\"size\"===t.type)).map((e=>{const{maxSize:r,minSize:s}=e;return(n(r,t)+n(s,t))/2}));let s=0;const o=r.length;if(0===o)return t;for(let n=0;n<o;n++)s+=r[n];const f=Math.floor(s/o);return Math.max(f,t)}function s(e){const n=e&&e.renderer,s=\"touch\"===(e&&e.event&&e.event.pointerType)?9:6;if(!n)return s;const o=\"visualVariables\"in n?r(s,n.visualVariables):s;if(\"simple\"===n.type)return t(o,n.symbol);if(\"unique-value\"===n.type){let e=o;return n.uniqueValueInfos?.forEach((n=>{e=t(e,n.symbol)})),e}if(\"class-breaks\"===n.type){let e=o;return n.classBreakInfos.forEach((n=>{e=t(e,n.symbol)})),e}return\"dot-density\"===n.type||n.type,o}export{s as calculateTolerance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/Error.js\";import\"../../../core/has.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileContainer as r}from\"../engine/BitmapTileContainer.js\";const t=t=>{let s=class extends t{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new r(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView?.removeAllChildren()}};return s=e([i(\"esri.views.2d.layers.BitmapTileLayerView2D\")],s),s};export{t as BitmapTileLayerView2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{watch as s}from\"../../../core/reactiveUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{equals as l}from\"../../../geometry/support/spatialReferenceUtils.js\";import{BitmapTileLayerView2D as o}from\"./BitmapTileLayerView2D.js\";import{LayerView2DMixin as h}from\"./LayerView2D.js\";import{createBlankImage as n,resampleImage as c}from\"./support/imageUtils.js\";import p from\"../tiling/TileInfoView.js\";import u from\"../tiling/TileKey.js\";import f from\"../tiling/TileQueue.js\";import m from\"../tiling/TileStrategy.js\";import y from\"../../layers/LayerView.js\";import d from\"../../layers/RefreshableLayerView.js\";import g from\"../../layers/TileLayerView.js\";import{createQueryGeometry as w}from\"../../support/drapedUtils.js\";const _=[0,0];let I=class extends(g(d(o(h(y))))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this.layer=null}get resampling(){return!(\"resampling\"in this.layer)||!1!==this.layer.resampling}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume()}attach(){const e=\"tileServers\"in this.layer?this.layer.tileServers:null;this._tileInfoView=new p(this.layer.tileInfo,this.layer.fullExtent),this._fetchQueue=new f({tileInfoView:this._tileInfoView,concurrency:e&&10*e.length||10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new m({cachePolicy:\"keep\",resampling:this.resampling,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.requestUpdate(),this.handles.add(s((()=>this.resampling),(()=>{this.doRefresh()}))),super.attach()}detach(){super.detach(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}supportsSpatialReference(e){return l(this.layer.tileInfo?.spatialReference,e)}createFetchPopupFeaturesQueryGeometry(e,t){return w(e,t,this.view)}async doRefresh(){!this.attached||this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))))}isUpdating(){return this._fetchQueue?.updating??!1}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(_,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate()}async fetchTile(e,t={}){const s=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:a=0}=t;if(!s)try{return await this._fetchImage(e,r)}catch(h){if(!i(h)&&!this.resampling)return n(this._tileInfoView.tileInfo.size);if(a<3){const i=this._tileInfoView.getTileParentId(e.id);if(i){const s=new u(i),r=await this.fetchTile(s,{...t,resamplingLevel:a+1});return c(this._tileInfoView,r,s,e)}}throw h}const l=new u(0,0,0,0);let o;try{if(await s.fetchAvailabilityUpsample(e.level,e.row,e.col,l,{signal:r}),l.level!==e.level&&!this.resampling)return n(this._tileInfoView.tileInfo.size);o=await this._fetchImage(l,r)}catch(h){if(i(h))throw h;o=await this._fetchImage(e,r)}return this.resampling?c(this._tileInfoView,o,l,e):o}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()))}catch(s){i(s)||t.getLogger(this.declaredClass).error(s)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchImageBitmapTile(e.level,e.row,e.col,{signal:t})}};e([r()],I.prototype,\"_fetchQueue\",void 0),e([r()],I.prototype,\"resampling\",null),I=e([a(\"esri.views.2d.layers.TileLayerView2D\")],I);const V=I;export{V as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{calculateTolerance as p}from\"../../renderers/support/clickToleranceUtils.js\";const i=i=>{let c=class extends i{async fetchPopupFeatures(e,s){const{layer:a}=this;if(!e)throw new r(\"tilelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:a});if(\"tile\"!==a.type)throw new r(\"tilelayerview:fetchPopupFeatures\",\"Layer type should be 'tile'\",{type:a.type});const i=this.get(\"view.scale\"),c=a.allSublayers.toArray().filter((e=>{const r=0===e.minScale||i<=e.minScale,t=0===e.maxScale||i>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&r&&t}));return o(c.map((async r=>{const o=r.createQuery(),a=t(s)?s.event:null,i=p({renderer:r.renderer,event:a});o.geometry=this.createFetchPopupFeaturesQueryGeometry(e,i),o.outFields=await r.popupTemplate.getRequiredFields();return(await r.queryFeatures(o)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return e([s()],c.prototype,\"layer\",void 0),c=e([a(\"esri.layers.mixins.TileLayerView\")],c),c};export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nfunction e(e){return e instanceof HTMLImageElement?e.naturalWidth:e.width}function t(e){return e instanceof HTMLImageElement?e.naturalHeight:e.height}function n(n,l,r,u){if(r.level===u.level)return l;const i=n.tileInfo.size,a=n.getTileResolution(r.level),c=n.getTileResolution(u.level);let g=n.getLODInfoAt(u.level);const h=g.getXForColumn(u.col),d=g.getYForRow(u.row);g=n.getLODInfoAt(r.level);const f=g.getXForColumn(r.col),s=g.getYForRow(r.row),m=e(l)/i[0],v=t(l)/i[1],w=Math.round(m*((h-f)/a)),I=Math.round(v*(-(d-s)/a)),M=Math.round(m*i[0]*(c/a)),F=Math.round(v*i[1]*(c/a)),L=o(i);return L.getContext(\"2d\").drawImage(l,w,I,M,F,0,0,i[0],i[1]),L}function o(e){const t=document.createElement(\"canvas\");return[t.width,t.height]=e,t}export{o as createBlankImage,n as resampleImage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/reactiveUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let c=class extends i{initialize(){this.handles.add(o((()=>this.layer),\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([a(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import{isSome as e,isNone as t}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as r}from\"../../core/unitUtils.js\";import{calculateTolerance as n}from\"../../renderers/support/clickToleranceUtils.js\";import i from\"../../geometry/Extent.js\";function a(t,n,a,o=new i){let s;if(\"2d\"===a.type)s=n*a.resolution;else if(\"3d\"===a.type){const i=a.overlayPixelSizeInMapUnits(t),o=a.basemapSpatialReference;s=e(o)&&!o.equals(a.spatialReference)?r(o)/r(a.spatialReference):n*i}const m=t.x-s,p=t.y-s,c=t.x+s,l=t.y+s,{spatialReference:f}=a;return o.xmin=Math.min(m,c),o.ymin=Math.min(p,l),o.xmax=Math.max(m,c),o.ymax=Math.max(p,l),o.spatialReference=f,o}function o(e,r,i){const o=i.toMap(e);if(t(o))return!1;return a(o,n(),i,s).intersects(r)}const s=new i;export{a as createQueryGeometry,o as intersectsDrapedGeometry};\n"],"names":["t","e","xoffset","Math","max","abs","yoffset","n","stops","length","r","s","size","filter","type","map","maxSize","minSize","o","f","floor","renderer","event","pointerType","visualVariables","symbol","uniqueValueInfos","forEach","classBreakInfos","this","view","timeline","record","layer","title","_bitmapView","_tileInfoView","container","addChild","removeChild","removeAllChildren","i","_","I","arguments","_tileStrategy","_fetchQueue","get","resampling","pause","state","update","resume","tileServers","p","tileInfo","fullExtent","tileInfoView","concurrency","process","fetchTile","m","cachePolicy","acquireTile","releaseTile","requestUpdate","handles","add","doRefresh","destroy","clear","l","spatialReference","w","attached","updateRequested","suspended","reset","tiles","_enqueueTileFetch","updating","createTile","bitmap","getTileCoords","key","x","y","resolution","getTileResolution","width","height","abort","id","once","tilemapCache","signal","resamplingLevel","a","_fetchImage","getTileParentId","u","c","fetchAvailabilityUpsample","level","row","col","has","push","source","declaredClass","error","fetchImageBitmapTile","allSublayers","toArray","minScale","maxScale","popupTemplate","popupEnabled","visible","createQuery","geometry","createFetchPopupFeaturesQueryGeometry","getRequiredFields","outFields","queryFeatures","features","then","concat","value","Boolean","prototype","g","d","h","V","getLODInfoAt","getXForColumn","getYForRow","HTMLImageElement","naturalWidth","v","naturalHeight","round","M","F","L","getContext","drawImage","document","createElement","dataChanged","catch","overlayPixelSizeInMapUnits","basemapSpatialReference","equals","xmin","min","ymin","xmax","ymax"],"sourceRoot":""}