{"version":3,"file":"static/js/9849.9b9672b4.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/engine/Bitmap.js","../node_modules/@arcgis/core/views/2d/engine/BitmapTile.js","../node_modules/@arcgis/core/views/2d/engine/BitmapTileContainer.js","../node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js","../node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js","../node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isSome as t,applySome as e}from\"../../../core/maybe.js\";import{createResolver as s,onAbortOrThrow as i,throwIfNotAbortError as r}from\"../../../core/promiseUtils.js\";import{g as h,h as o,r as u,k as a,m as n}from\"../../../chunks/mat3.js\";import{c as d}from\"../../../chunks/mat3f32.js\";import{f as l}from\"../../../chunks/vec2f32.js\";import{DisplayObject as c}from\"./DisplayObject.js\";import _ from\"./ImageryBitmapSource.js\";import{ContextType as m}from\"../../webgl/context-util.js\";import{TextureType as p,PixelFormat as g,SizedPixelFormat as x,PixelType as f,TextureWrapMode as b}from\"../../webgl/enums.js\";import{Texture as w}from\"../../webgl/Texture.js\";function S(t){return t&&\"render\"in t}function T(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}function v(t){return S(t)?t instanceof _?e(t.getRenderedRasterPixels(),(t=>t.renderedRasterPixels)):T(t):t}class R extends c{constructor(t=null,e){super(),this.blendFunction=\"standard\",this._sourceWidth=0,this._sourceHeight=0,this._textureInvalidated=!1,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.immutable=e.immutable??!1,this.requestRenderOnSourceChangedEnabled=e.requestRenderOnSourceChangedEnabled??!0,this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null),t(this._uploadStatus)&&(this._uploadStatus.controller.abort(),this._uploadStatus=null)}get isSourceScaled(){return this.width!==this._sourceWidth||this.height!==this._sourceHeight}get height(){return void 0!==this._height?this._height:this._sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){null==t&&null==this._source||(this._source=t,this._source instanceof HTMLImageElement?(this._sourceHeight=this._source.naturalHeight,this._sourceWidth=this._source.naturalWidth):(this._sourceHeight=this._source.height,this._sourceWidth=this._source.width),this.invalidateTexture())}get width(){return void 0!==this._width?this._width:this._sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}async setSourceAsync(e,r){t(this._uploadStatus)&&this._uploadStatus.controller.abort();const h=new AbortController,o=s();return i(r,(()=>h.abort())),i(h,(t=>o.reject(t))),this._uploadStatus={controller:h,resolver:o},this.source=e,o.promise}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}updateTransitionProperties(t,e){t>=64&&(this.fadeTransitionEnabled=!1,this.inFadeTransition=!1),super.updateTransitionProperties(t,e)}setTransform(t){const e=h(this.transforms.dvs),[s,i]=t.toScreenNoRotation([0,0],[this.x,this.y]),r=this.resolution/this.pixelRatio/t.resolution,d=r*this.width,c=r*this.height,_=Math.PI*this.rotation/180;o(e,e,l(s,i)),o(e,e,l(d/2,c/2)),u(e,e,-_),o(e,e,l(-d/2,-c/2)),a(e,e,l(d,c)),n(this.transforms.dvs,t.displayViewMat3,e)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind(t,e){this._texture&&t.bindTexture(this._texture,e)}async updateTexture({context:e,painter:s}){if(!this._textureInvalidated)return;if(this._textureInvalidated=!1,this._texture||(this._texture=this._createTexture(e)),!this.source)return void this._texture.setData(null);this._texture.resize(this._sourceWidth,this._sourceHeight);const i=v(this.source);try{if(t(this._uploadStatus)){const{controller:t,resolver:e}=this._uploadStatus,r={signal:t.signal},{width:h,height:o}=this,u=this._texture,a=s.textureUploadManager;await a.enqueueTextureUpdate({data:i,texture:u,width:h,height:o},r),e.resolve(),this._uploadStatus=null}else this._texture.setData(i);this.ready()}catch(h){r(h)}}onDetach(){this.destroy()}_createTransforms(){return{dvs:d()}}_createTexture(t){const e=this.immutable&&t.type===m.WEBGL2;return new w(t,{target:p.TEXTURE_2D,pixelFormat:g.RGBA,internalFormat:e?x.RGBA8:g.RGBA,dataType:f.UNSIGNED_BYTE,wrapMode:b.CLAMP_TO_EDGE,isImmutable:e,width:this._sourceWidth,height:this._sourceHeight})}}export{R as Bitmap,S as isImageSource,T as rasterize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../chunks/mat3f32.js\";import{Bitmap as t}from\"./Bitmap.js\";import{TiledDisplayObject as s}from\"./webgl/TiledDisplayObject.js\";class r extends s{constructor(e,s,r,i,a,n,m=null){super(e,s,r,i,a,n),this.bitmap=new t(m,{immutable:!1,requestRenderOnSourceChangedEnabled:!1}),this.bitmap.coordScale=[a,n],this.bitmap.once(\"isReady\",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(e){super.beforeRender(e),this.bitmap.beforeRender(e)}afterRender(e){super.afterRender(e),this.bitmap.afterRender(e)}set stencilRef(e){this.bitmap.stencilRef=e}get stencilRef(){return this.bitmap.stencilRef}_createTransforms(){return{dvs:e(),tileMat3:e()}}setTransform(e){super.setTransform(e),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}export{r as BitmapTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{BitmapTile as i}from\"./BitmapTile.js\";import{brushes as r}from\"./brushes.js\";import{WGLDrawPhase as t}from\"./webgl/enums.js\";import s from\"./webgl/TileContainer.js\";class n extends s{get requiresDedicatedFBO(){return this.children.some((e=>\"additive\"===e.bitmap.blendFunction))}createTile(r){const t=this._tileInfoView.getTileBounds(e(),r),s=this._tileInfoView.getTileResolution(r.level),[n,o]=this._tileInfoView.tileInfo.size;return new i(r,s,t[0],t[3],n,o)}prepareRenderPasses(e){const i=e.registerRenderPass({name:\"bitmap (tile)\",brushes:[r.bitmap],target:()=>this.children.map((e=>e.bitmap)),drawPhase:t.MAP});return[...super.prepareRenderPasses(e),i]}doRender(e){this.visible&&e.drawPhase===t.MAP&&super.doRender(e)}}export{n as BitmapTileContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../core/maybe.js\";class i{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return e(this.pixelBlock)?this.pixelBlock.width:0}get height(){return e(this.pixelBlock)?this.pixelBlock.height:0}render(e){const i=this.pixelBlock;if(t(i))return;const l=this.filter({pixelBlock:i});if(t(l.pixelBlock))return;const r=l.pixelBlock.getAsRGBA(),o=e.createImageData(l.pixelBlock.width,l.pixelBlock.height);o.data.set(r),e.putImageData(o,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return t(e.pixelBlock)?null:{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport has from\"../../../../core/has.js\";import{WGLDrawPhase as e}from\"./enums.js\";import r from\"./WGLContainer.js\";import s from\"./brushes/WGLBrushInfo.js\";import t from\"./brushes/WGLBrushStencil.js\";const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends r{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(n),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:\"stencil\",brushes:[t],drawPhase:e.DEBUG|e.MAP|e.HIGHLIGHT,target:()=>this.getStencilTarget()})),has(\"esri-tiles-debug\")&&n.push(r.registerRenderPass({name:\"tileInfo\",brushes:[s],drawPhase:e.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{s as t,m as s}from\"../../../../chunks/mat3.js\";import{DisplayObject as i}from\"../DisplayObject.js\";import e from\"../../tiling/TileKey.js\";class r extends i{constructor(t,s,i,r,h,o,n=h,a=o){super(),this.triangleCountReportedInDebug=0,this.triangleCount=0,this.texture=null,this.key=new e(t),this.resolution=s,this.x=i,this.y=r,this.width=h,this.height=o,this.rangeX=n,this.rangeY=a}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}setTransform(i){const e=this.resolution/(i.resolution*i.pixelRatio),r=this.transforms.tileMat3,[h,o]=i.toScreenNoRotation([0,0],[this.x,this.y]),n=this.width/this.rangeX*e,a=this.height/this.rangeY*e;t(r,n,0,0,0,a,0,h,o,1),s(this.transforms.dvs,i.displayViewMat3,r)}}export{r as TiledDisplayObject};\n"],"names":["S","t","T","e","document","createElement","width","height","render","getContext","R","blendFunction","_sourceWidth","_sourceHeight","_textureInvalidated","stencilRef","coordScale","_height","pixelRatio","resolution","rotation","_source","_width","x","y","immutable","requestRenderOnSourceChangedEnabled","source","requestRender","bind","this","_texture","dispose","_uploadStatus","controller","abort","get","set","HTMLImageElement","naturalHeight","naturalWidth","invalidateTexture","updateTexture","r","h","AbortController","o","s","i","reject","resolver","promise","fadeTransitionEnabled","inFadeTransition","transforms","dvs","toScreenNoRotation","d","c","_","Math","PI","l","u","a","n","displayViewMat3","mips","descriptor","hasMipmap","generateMipmap","setSamplingMode","samplingMode","bindTexture","context","painter","_createTexture","setData","resize","getRenderedRasterPixels","renderedRasterPixels","signal","textureUploadManager","enqueueTextureUpdate","data","texture","resolve","ready","destroy","type","m","w","target","p","pixelFormat","g","internalFormat","dataType","f","wrapMode","b","isImmutable","bitmap","once","beforeRender","afterRender","tileMat3","stage","children","some","_tileInfoView","getTileBounds","getTileResolution","level","tileInfo","size","registerRenderPass","name","brushes","map","drawPhase","visible","pixelBlock","extent","originalPixelBlock","filter","getAsRGBA","createImageData","putImageData","Uint8Array","buffer","key","row","col","sortChildren","setStencilReference","state","requiredLevel","getClosestInfoForScale","scale","displayLevel","scaleToZoom","push","getStencilTarget","has","triangleCountReportedInDebug","triangleCount","rangeX","rangeY"],"sourceRoot":""}