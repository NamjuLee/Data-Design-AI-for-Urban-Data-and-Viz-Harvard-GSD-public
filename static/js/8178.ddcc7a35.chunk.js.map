{"version":3,"file":"static/js/8178.ddcc7a35.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js","../node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{createTask as e}from\"../../../core/asyncUtils.js\";import t from\"../../../core/Error.js\";import r from\"../../../core/Logger.js\";import{isSome as s,unwrap as a}from\"../../../core/maybe.js\";import{throwIfAborted as i,isAbortError as o}from\"../../../core/promiseUtils.js\";import{equals as n,WGS84 as u}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as p,convertToGeometry as h}from\"../featureConversionUtils.js\";import y from\"../data/FeatureStore.js\";import{project as c,checkProjectionSupport as m}from\"../data/projectionSupport.js\";import{QueryEngine as l}from\"../data/QueryEngine.js\";import{validateGeoJSON as g,createOptimizedFeatures as _}from\"./geojson/geojson.js\";import{mixAttributes as f}from\"./support/sourceUtils.js\";import{getFeature as d}from\"../../ogc/wfsUtils.js\";import w from\"../../support/FieldsIndex.js\";class E{constructor(){this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=async e=>{const{objectIdField:t}=this._queryEngine,r=await d(this._getFeatureUrl??\"\",this._featureType.typeName,this._getFeatureOutputFormat,{customParameters:this._customParameters,dateFields:this._queryEngine.fieldsIndex.dateFields.map((e=>e.name)),signal:e});await g(r),i(e);const a=_(r,{geometryType:this._queryEngine.geometryType,hasZ:!1,objectIdField:t});if(!n(this._queryEngine.spatialReference,u))for(const i of a)s(i.geometry)&&(i.geometry=p(c(h(i.geometry,this._queryEngine.geometryType,!1,!1),u,this._queryEngine.spatialReference)));let o=1;for(const s of a){const e={};f(this._fieldsIndex,e,s.attributes,!0),s.attributes=e,null==s.attributes[t]&&(s.objectId=s.attributes[t]=o++)}return a}}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,t){const{getFeatureUrl:r,getFeatureOutputFormat:s,spatialReference:o,fields:n,geometryType:u,featureType:p,objectIdField:h,customParameters:c}=e;this._featureType=p,this._customParameters=c,this._getFeatureUrl=r,this._getFeatureOutputFormat=s,this._fieldsIndex=new w(n),await this._checkProjection(o),i(t),this._queryEngine=new l({fields:n,geometryType:u,hasM:!1,hasZ:!1,objectIdField:h,spatialReference:o,timeInfo:null,featureStore:new y({geometryType:u,hasM:!1,hasZ:!1})});const m=await this._snapshotFeatures(a(t.signal));return this._queryEngine.featureStore.addMany(m),{extent:this._queryEngine.fullExtent}}async applyEdits(){throw new t(\"wfs-source:editing-not-supported\",\"applyEdits() is not supported on WFSLayer\")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(s){return this._customParameters=s,this._snapshotTask?.abort(),this._snapshotTask=e(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(e=>{this._queryEngine.featureStore.clear(),o(e)||r.getLogger(\"esri.layers.WFSLayer\").error(new t(\"wfs-layer:getfeature-error\",\"An error occurred during the GetFeature request\",{error:e}))})),await this._waitSnapshotComplete(),{extent:this._queryEngine.fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _checkProjection(e){try{await m(u,e)}catch{throw new t(\"unsupported-projection\",\"Projection not supported\",{spatialReference:e})}}}export{E as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../core/maybe.js\";import{isValid as t}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{validateFieldValue as n,validationErrorToString as i,isNumericField as r,isStringField as s,sanitizeNullFieldValue as o}from\"../../../support/fieldUtils.js\";class l{constructor(){this.code=null,this.description=null}}class u{constructor(e){this.error=new l,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function a(e){return new u(e)}class c{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function f(e){return new c(e)}const d=new Set;function m(e,t,r,s=!1,o){d.clear();for(const l in r){const u=e.get(l);if(!u)continue;const c=r[l],f=p(u,c);if(f!==c&&o&&o.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:u,originalValue:c,sanitizedValue:f}}),d.add(u.name),u&&(s||u.editable)){const e=n(u,f);if(e)return a(i(e,u,f));t[u.name]=f}}for(const n of e?.requiredFields??[])if(!d.has(n.name))return a(`missing required field \"${n.name}\"`);return null}function p(e,t){let n=t;return\"string\"==typeof t&&r(e)?n=parseFloat(t):null!=t&&s(e)&&\"string\"!=typeof t&&(n=String(t)),o(n)}let h;function g(n,i){if(!n||!t(i))return n;if(\"rings\"in n||\"paths\"in n){if(e(h))throw new TypeError(\"geometry engine not loaded\");return h.simplify(i,n)}return n}async function y(){return e(h)&&(h=await import(\"../../../../geometry/geometryEngineJSON.js\")),h}async function w(e,n){!t(e)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await y()}export{a as createFeatureEditErrorResult,f as createFeatureEditSuccessResult,w as loadGeometryEngineForSimplify,m as mixAttributes,g as simplify};\n"],"names":["E","this","_queryEngine","_customParameters","_snapshotFeatures","e","t","objectIdField","d","_getFeatureUrl","_featureType","typeName","_getFeatureOutputFormat","customParameters","dateFields","fieldsIndex","map","name","signal","r","g","i","a","_","geometryType","hasZ","n","spatialReference","u","s","geometry","p","c","h","o","f","_fieldsIndex","attributes","objectId","destroy","getFeatureUrl","getFeatureOutputFormat","fields","featureType","w","_checkProjection","l","hasM","timeInfo","featureStore","y","m","addMany","extent","fullExtent","_waitSnapshotComplete","executeQuery","executeQueryForCount","executeQueryForIds","executeQueryForExtent","executeQueryForSnapping","_snapshotTask","abort","promise","then","clear","error","finished","code","description","globalId","success","uniqueId","Set","get","push","message","details","field","originalValue","sanitizedValue","add","editable","requiredFields","has","parseFloat","String","TypeError","simplify"],"sourceRoot":""}